<div class="col-md-6">
<%= form_for @post, url: posts_path,:html => {:multipart => true}  do |p| %>
    <%= p.label :title, "title" %>
    <%= p.text_field :title, class: :'form-control' %>
    <p></p>
    <%= p.label :content, "content" %>
    <%= p.text_area :content, class: :'form-control'%>
    <p></p>
    <div class="form-group">
      <%= p.label :imageables, "Upload File" %>
      <%= file_field_tag "images[]", type: :file , :multiple=> true %>
      <%= check_box_tag "destroy_photo", "1" %> 刪除檔案      
    </div>
    
     
    <%= p.submit "Create" , class: :'btn btn-warning' %>
<% end %>
<p></p>
    <%= link_to "Back to index", posts_path, class: :'btn btn-info' %>
</div>
<div class="col-md-6">
    <img id="previewImage" src="#" style="max-width:100%;" />
</div>
<script>
  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();
      
      reader.onload = function (e) {
        $('#previewImage').attr('src', e.target.result);
      }
      
      reader.readAsDataURL(input.files[0]);
    }
  }
  $("#images_").change(function(){
      readURL(this);
  });
</script>